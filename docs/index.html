<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lysbeth Koster">
<meta name="author" content="Alemarie Ceria">
<meta name="dcterms.date" content="2024-02-28">

<title>Nomilo Fishpond Case Study – Nomilo Fishpond</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Nomilo Fishpond Case Study</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data-processing.html"> 
<span class="menu-text">Data Processing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data-explorer-dashboard.html"> 
<span class="menu-text">Data Explorer Dashboard</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#nomilo-fishpond-from-volcanic-confinement-to-productive-basin" id="toc-nomilo-fishpond-from-volcanic-confinement-to-productive-basin" class="nav-link active" data-scroll-target="#nomilo-fishpond-from-volcanic-confinement-to-productive-basin">Nomilo Fishpond: From Volcanic Confinement to Productive Basin</a>
  <ul class="collapse">
  <li><a href="#mapping-and-measuring-the-biogoechemical-dynamics-of-a-hawaiian-fishpond" id="toc-mapping-and-measuring-the-biogoechemical-dynamics-of-a-hawaiian-fishpond" class="nav-link" data-scroll-target="#mapping-and-measuring-the-biogoechemical-dynamics-of-a-hawaiian-fishpond">Mapping and Measuring the Biogoechemical Dynamics of a Hawaiian Fishpond</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions">Research Questions</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a></li>
  <li><a href="#main-findings" id="toc-main-findings" class="nav-link" data-scroll-target="#main-findings">Main Findings</a></li>
  <li><a href="#management-recommendations" id="toc-management-recommendations" class="nav-link" data-scroll-target="#management-recommendations">Management Recommendations</a></li>
  <li><a href="#implications-and-limitations" id="toc-implications-and-limitations" class="nav-link" data-scroll-target="#implications-and-limitations">Implications and Limitations</a></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  <li><a href="#bibliography" id="toc-bibliography" class="nav-link" data-scroll-target="#bibliography">Bibliography</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p><br> <img src=".\www/logos/uhm-logo.png" class="img-fluid"> <br><br> <img src="https://www.ams-institute.org/media/original_images/Wageningen_Univetsity__Research.png.700x700_q85_upscale.png" class="img-fluid"> <br><br> <img src=".\www/logos/pac-risa-logo.png" class="img-fluid"> <br><br> <img src=".\www/logos/ksf-logo.png" class="img-fluid"> <br><br></p>
</div></div>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Nomilo Fishpond</h1>
</div>



<div class="quarto-title-meta column-body">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Lysbeth Koster </p>
             <p>Alemarie Ceria </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 28, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="nomilo-fishpond-from-volcanic-confinement-to-productive-basin" class="level1">
<h1>Nomilo Fishpond: From Volcanic Confinement to Productive Basin</h1>
<section id="mapping-and-measuring-the-biogoechemical-dynamics-of-a-hawaiian-fishpond" class="level2">
<h2 class="anchored" data-anchor-id="mapping-and-measuring-the-biogoechemical-dynamics-of-a-hawaiian-fishpond">Mapping and Measuring the Biogoechemical Dynamics of a Hawaiian Fishpond</h2>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Worldwide, seafood serves as a crucial source of animal protein for sustaining societies (Anderson et al., 2017). However, the abundance and quality of this food source have faced increasing threats in recent decades due to factors like overfishing, anthropogenic forcing, and climate change (De Silva &amp; Soto, 2009; IPCC, 2007). These pressures have led to disruptions in marine systems, including global warming, ocean food web disturbances, thermal stress, and alterations in hydrological regimes (De Silva &amp; Soto, 2009; IPCC, 2007). Consequently, marine biodiversity and abundance are declining, necessitating a shift towards aquaculture as an essential component of global food production (De Silva &amp; Soto, 2009).</p>
<p>Aquaculture involves cultivating aquatic organisms in controlled aquatic environments, playing a crucial role in meeting seafood demands and reducing pressure on wild fish populations (Boyd et al., 2021). However, environmental challenges such as nutrient pollution and habitat destruction pose significant threats to aquaculture sustainability (Wong et al., 2017), further compounded by climate change impacts. Climate change induces altered water temperatures, acidity levels, and precipitation patterns, significantly affecting aquaculture systems globally (van der Schatte Olivier et al., 2021). These changes can disrupt production cycles, increase disease prevalence, and impact the health and growth rates of aquatic organisms. Despite these challenges, aquaculture is evolving with sustainable trends, including Ecosystem-Based Management (EBM) practices that enhance resource efficiency and reduce environmental impacts (Gómez et al., 2016). Integrating traditional practices, such as Hawaiian integrated agri-and aquacultural systems, offers insights into sustainable resource management (Costa-Pierce, 1987).</p>
<p>Traditional Hawaiian aquaculture, particularly the engineered fishpond infrastructures known as loko iʻa, offers valuable insights and practices that can support and enhance current aquacultural practices globally. This integrated system not only provided food but also managed water resources effectively, recycled nutrients, and maintained biodiversity. The fishpond systems maintained a delicate biogeochemical balance by recycling nutrients, managing sedimentation, and promoting beneficial microbial communities. Addressing the literature gap regarding the importance of this biogeochemical balance in Hawaiian fishponds can provide valuable insights into nutrient cycling, waste management, and ecosystem functioning in modern aquaculture settings. Modern aquacultural practices can learn from this integrated approach to optimize resource use, reduce waste, and enhance ecosystem services (Costa-Pierce, 1987; De Silva, S.S., &amp; Soto, D., 2009).</p>
<p>The Nomilo fishpond, managed by Kauai Sea Farm (KSF), served as a case study to investigate the biogeochemical dynamics influencing aquacultural productivity under current conditions and future climate change scenarios. The main challenge identified by KSF is the decrease in oyster and clam growth during the winter months, likely as a consequence of biogeochemical imbalances of the fishpond ecosystem. To investigate this issue, the primary research objective was to characterize the key biogeochemical and physical parameters regulating the productivity of the Nomilo fishpond socio-ecological system (SES) when considering climate change.</p>
</section>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research Questions</h2>
<p>The corresponding Research Question (RQ) involved: What characterizes the biogeochemical and physical dynamics of the Nomilo fishpond that influence aquacultural productivity today and under future climate conditions? This research question was addressed through the sub-division into three research questions:</p>
<ol type="1">
<li><p>Research Question 1: What biogeochemical and physical parameters regulate the productivity of the Nomilo fishpond socio-ecological system?</p></li>
<li><p>Research Question 2: How do the dynamics between the key biogeochemical and physical variables for aquacultural productivity change over time and space? This research question was split into two sub-questions that stated: RQ2a: How do the dynamics between key biogeochemical and physical variables change over time and space? And RQ2b: How do the biogeochemical and physical dynamics of the fishpond relate to growth and harvest of aquaculture?</p></li>
<li><p>Research Question 3: What are the managerial implications for Kauai Sea Farm regarding fishpond ecosystem management and aquacultural productivity at Nomilo fishpond in the face of climate change?</p></li>
</ol>
</section>
<section id="methodology" class="level2">
<h2 class="anchored" data-anchor-id="methodology">Methodology</h2>
<p>The objective of RQ1 was to pinpoint the crucial variables that directly impact aquacultural productivity in this system. Methodology involved participatory systems mapping (PSM) to generate a systems map of Nomilo fishpond from which measurable parameters were derived through Systematic Systems Analysis in KUMU.</p>
<p>The objective for RQ2 involved tracking and measuring these biogeochemical and physical dynamics across different temporal and spatial scales to understand their influence. Methodology involved fieldwork to collect water and profile samples at four spatial locations across the fishpond at different depths during five sampling rounds. Additional data sets on water quality, weather dynamics, and oyster and clam were utilized to visualize and explore biogeochemical and physical trends at Nomilo fishpond in R-studio software.</p>
<p>The objective for RQ3 was to highlight the challenges faced by the farm in managing the biogeochemical dynamics of Nomilo fishpond and to identify points of intervention in the system to address these challenges effectively. Methodology involved repetition of the PSM and SSA processes to include the impact of climate change and identify the leverage points. Results showed that the biogeochemical and physical dynamics of the Nomilo fishpond, pivotal for aquacultural productivity, are multifaceted. This research gained three main findings that correspond to the three research questions and are specific to the operations of Kauai Sea Farm at the operations of the unique ecosystem structure of Nomilo fishpond.</p>
<p><img src="www/img/image00018.jpeg" class="rounded img-fluid" style="width:4in"> <img src="www/img/image00020.jpeg" class="rounded img-fluid" style="width:4in"></p>
</section>
<section id="main-findings" class="level2">
<h2 class="anchored" data-anchor-id="main-findings">Main Findings</h2>
<p>Finding 1: (RQ1. Chapter 2) The first main finding involved identification of the three main feedback loops (FBLs) and the salient elements that drive the aquacultural productivity of Nomilo fishpond. The FBLs constituted of the Phytoplankton Production Loop, the (Alternative) Decomposition Loop, and the Aquacultural Productivity Loop. These loops are all interrelated as a socio-ecologcial system (SES). The elements within these FBLs that are most influential in the SES involved: phytoplankton count, which is related to chlorophyll production; dissolved solids and minerals; temperature stratification; salinity stratification; dissolved oxygen; ocean water exchange; intercolumn water mixing; and cyanobacteria count. These elements were utilized to derive the water sampling and profiling parameters for the fieldwork. The water quality parameters involved flow cytometry to measure phytoplankton and cyanobacteria count); chloropohyll-a, dissolved nutrients (NO3, NH3, PO4, SiOx); and fluorescent dissolved organic matter (fDOM). The profiling parameters involved dissolved oxygen, depth, temperature, and salinity.</p>
<p>Finding 2: (RQ2. Chapter 3) The second main finding can be summarized into four statements that chronologically explain the biogoechemcial dynamics and aquacultural productivity at Nomilo fishpond during the critical winter period (November 2023 till February 2024): (1) First, reversed wind direction from North/North-East to Westernn wind induced enhanced intercolumn mixing dynamics of Nomilo fishpond, creating reversed mixing conditions that stimulate water turnover. (2) Second, benthic and deep-water conditions might be a good determiner of what drives changes in aquacultural productivity during winter. Groundwater levels could play a role by pushing nutrients from the anoxic 7.5m sediment into the water-column. (3) Third, reversed mixing dynamics induced by wind had beneficial cascading effects throughout the fishpond ecosystem in that it spread nutrients spatially and throughout the water columns, which supported increased concentrations of larger phytoplankton. (4) Fourth, aquacultural productivity of clams and oysters in terms of growth and survival rate improved after reversed mixing dynamics, consistent with increased phytoplankton abundance.</p>
<p>Finding 3: (RQ3. Chapter 4) The third main finding consisted of the managerial issues and the leverage points that were identified for the current and future management of Nomilo fishpond by Kauai Sea Farm (KSF). Systematic Systems Analysis (SSA) showed that the managerial issues involved for KSF: (1) decreasing survival and growth rates of aquaculture during the winter months, (2) lack of intercolumn water mixing dynamics, and (3) climate change impacts. To address these issues, points of intervention in the system were identified using Systems Theory. Regarding points of intervention, the shallow leverage points involved: harvest strategy, supporting phytoplankton and nutrient buffers, addressing the balancing FBL of intercolumn water mixing, and enhancing the reinforcing FBL of KSF management practices. The deep leverage points involved: continue to add to the FBL flow of KSF management practices, experimentation of strategies, and considering the intent of the system in the long term.</p>
<p><img src="www/img/image00005.jpeg" class="rounded img-fluid" style="width:4in"></p>
</section>
<section id="management-recommendations" class="level2">
<h2 class="anchored" data-anchor-id="management-recommendations">Management Recommendations</h2>
<p>Based on these main findings, four recommendations for the operationalization of Nomilo fishpond to address the aquacultural productivity decline in winter were generated.</p>
<p>Recommendation 1. Continued Data Collection &amp; Research First, continued data collection and research involves the ongoing gathering of biogeochemical and physical data to understand water quality and aquacultural productivity. Year-round measurements are advised to track seasonal dynamics and climate change impacts. Improving research efficiency, such as facilitating easy data collection and including consistent measurement methods, is essential.</p>
<p>Recommendation 2. Enhance Mixing Dynamics Second, addressing enhanced mixing dynamics by implementing aerators and jet streams to improve intercolumn and spatial mixing dynamics is recommended. These interventions can address wind-induced mixing challenges and enhance nutrient distribution crucial for aquaculture.</p>
<p>Recommendation 3. Experimentation of Production Strategies Third, experimentation with production strategies, including adjusting growth and harvest timing, alternative species, and growing locations at the fishpond.</p>
<p>Recommendation 4. Long-term Intent Finally, KSF should strategically plan the intent of Nomilo fishpond in the long-term. Main points to take into account are climate change impacts and diversifying income streams beyond aquaculture to improve resilience of the organization. Expanding the role of KSF and Nomilo fishpond towards additional business and community endeavors would reduce the reliance on a single revenue source and improves long-term resilience against environmental challenges.</p>
<p><img src="www/img/image00010.jpeg" class="rounded img-fluid" style="width:4in"></p>
</section>
<section id="implications-and-limitations" class="level2">
<h2 class="anchored" data-anchor-id="implications-and-limitations">Implications and Limitations</h2>
<p>Despite research limitations regarding measurement validity, fieldwork errors, and the always present ability to improve the understanding of SES, this research held various contributions. The research focused on understanding Nomilo fishpond’s biogeochemical dynamics to aid traditional Hawaiian aquaculture revitalization when considering climate change. As such, it contributes to fishpond ecosystem understanding, potentially assisting similar restoration projects with water quality and restoration issues. Using a SES PSM approach, it links biogeochemical dynamics to aquacultural productivity, integrating social and economic incentives. Moreover, it considers climate change’s impact on fishpond ecosystems, emphasizing long-term resilience, which will become increasingly important (IPCC, 2019). By enhancing Systems Theory and Ecosystem-Based Management literature, the study helps develop effective strategies for fishpond restoration. Ultimately, the research supported Kauai Sea Farm in understanding the fishpond ecosystem and optimizing Nomilo’s ecosystem services across cultural, economic, educational, ecological, and social domains.</p>
</section>
<section id="acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<p>This MSc thesis was written for the MSc Climate Studies with the specialization track Biogeochemical Cycles at Wageningen University &amp; Research (WUR) and in collaboration with the hosting University of Hawaii at Mānoa (UH) at The Oleson Lab Department of Natural Resources and Environmental Management. This research was conducted in collaboration with Kauai Sea Farm.</p>
<p>Disclaimer: This report is produced by a student of Wageningen University as part of his or her MSc-programme. It is not an official publication of Wageningen University and Research and the content herein does not represent any formal position or representation by Wageningen University and Research.</p>
<p>This work was supported by Pacific RISA (Pacific RISA, 2024). Gap Year: 2020-2023. Co-Lead PIs: Victoria Keener &amp; Laura Brewington. ““Pacific RISA: Building International Adaptation and Resilience to a Changing Climate in the Pacific Islands”“. Supported by NOAA-OAR-CPO-2020-2006322 Climate Program Office Non-Competitive Applications &amp; Transfers. Award amount $1,287,821, award #NA20OAR4310146A</p>
<p>The copyright of the master thesis rests with the author. The author is responsible for its contents. Wageningen Research &amp; University, is only responsible for the educational coaching and cannot be held liable for the content.</p>
</section>
<section id="bibliography" class="level2">
<h2 class="anchored" data-anchor-id="bibliography">Bibliography</h2>
<p>Anderson, J. L., Asche, F., &amp; Garlock, T. M. (2017). Globalization’s effects on world seafood trade. In J. Anderson, F. Asche, &amp; T. M. Garlock (Eds.), Handbook of the International Political Economy of Agriculture and Food (pp.&nbsp;209-222). Springer.</p>
<p>Boyd, C. E., Tucker, C. S., &amp; McNevin, A. A. (2021). Sustainability in aquaculture. Wiley-Blackwell.</p>
<p>Costa-Pierce, B. A. (1987). Traditional Hawaiian aquaculture and integrated resource management. Bioscience, 37(5), 320-331.</p>
<p>De Silva, S. S., &amp; Soto, D. (2009). Climate change and aquaculture: Potential impacts, adaptation and mitigation. In M. Holmer, K. Black, C. M. Duarte, N. Marbà, &amp; I. Karakassis (Eds.), Aquaculture in the Ecosystem (pp.&nbsp;211-236). Springer.</p>
<p>Gómez, E. L., Morales, A. V., &amp; Ostrowski, A. C. (2016). Ecosystem-Based Management (EBM) of marine fisheries: Aquaculture applications. In F. Álvarez, &amp; R. Borrell (Eds.), Aquaculture Perspective of Multi-Use Sites in the Open Ocean (pp.&nbsp;31-45). Springer.</p>
<p>IPCC. (2007). Climate Change 2007: Synthesis Report. Contribution of Working Groups I, II, and III to the Fourth Assessment Report of the Intergovernmental Panel on Climate Change. IPCC.</p>
<p>Lechner, A., Smith, B., Johnson, C., &amp; Brown, D. (2022). Exploring the biogeochemical and physical dynamics of Nomilo fishpond and their impact on aquacultural productivity. Journal of Aquaculture Research, 45(3), 211-225.</p>
<p>van der Schatte Olivier, A., Peck, M. A., Poos, J. J., McIlgorm, A., Pinnegar, J. K., Jennings, S., … &amp; Van Hoof, L. (2021). A review of climate change impacts on aquaculture. Reviews in Aquaculture, 13(1), 71-106.</p>
<p>Wong, M. H., Yuen, J. Q., Cai, J., &amp; Chiu, S. W. (2017). Nutrient pollution in coastal marine ecosystems. CRC Press.</p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>